class MusicianSiteconstructorthis.navbardocument.getElementById'navbar'this.hamburgerdocument.getElementById'hamburger'this.navMenudocument.getElementById'navmenu'this.videoModaldocument.getElementById'videomodal'this.modalVideodocument.getElementById'modalvideo'this.heroVideodocument.getElementById'herovideo'this.videoPlayBtndocument.getElementById'videoplaybtn'this.contactFormdocument.getElementById'contactform'this.initinitthis.setupNavigationthis.setupScrollEffectsthis.setupVideoHandlersthis.setupContactFormthis.setupAnimationsthis.setupSmoothScrollingthis.setupParallaxOptimizationssetupNavigationthis.hamburger.addEventListener'click'>this.navMenu.classList.toggle'active'this.hamburger.classList.toggle'active'document.querySelectorAll'.navlink'.forEachlink>link.addEventListener'click'>this.navMenu.classList.remove'active'this.hamburger.classList.remove'active'document.addEventListener'click'e>if!this.navMenu.containse.target&& !this.hamburger.containse.targetthis.navMenu.classList.remove'active'this.hamburger.classList.remove'active'setupScrollEffectslet lastScrollYwindow.scrollYconst herodocument.querySelector'.hero'const heroOverlaydocument.querySelector'.herooverlay'const parallaxLayersdocument.querySelectorAll'.parallaxlayer'let tickingfalselet heroVisibletrueconst observernew IntersectionObserverentries>entries.forEachentry>heroVisibleentry.isIntersectingrootMargin: '100px 0px'ifheroobserver.observeheroconst updateParallax>const currentScrollYwindow.scrollYifcurrentScrollY > 100this.navbar.classList.add'scrolled'elsethis.navbar.classList.remove'scrolled'ifhero && heroVisible && currentScrollY < window.innerHeight1.2parallaxLayers.forEachlayer>const speedparseFloatlayer.dataset.speed|| 0const yPoscurrentScrollYspeedlayer.style.transform`translate3d0$yPospx0`ifheroOverlayheroOverlay.style.transform`translate3d0$currentScrollY0.4px0`this.updateActiveNavLinklastScrollYcurrentScrollYtickingfalseconst requestTick>if!tickingrequestAnimationFrameupdateParallaxtickingtruewindow.addEventListener'scroll'requestTickpassive: trueupdateParallaxupdateActiveNavLinkconst sectionsdocument.querySelectorAll'section[id]'const scrollPoswindow.scrollY100sections.forEachsection>const sectionTopsection.offsetTopconst sectionHeightsection.offsetHeightconst sectionIdsection.getAttribute'id'const navLinkdocument.querySelector`.navlink[href"#$sectionId"]`ifscrollPos >sectionTop && scrollPos < sectionTopsectionHeightdocument.querySelectorAll'.navlink'.forEachlink>link.classList.remove'active'ifnavLinknavLink.classList.add'active'setupVideoHandlersdocument.querySelectorAll'.playbtn'.forEachbtn>btn.addEventListener'click'e>e.preventDefaultconst videoSrcbtn.getAttribute'datavideo'this.openVideoModalvideoSrcconst closeBtndocument.querySelector'.videomodalclose'ifcloseBtncloseBtn.addEventListener'click'>this.closeVideoModalifthis.videoModalthis.videoModal.addEventListener'click'e>ife.targetthis.videoModalthis.closeVideoModaldocument.addEventListener'keydown'e>ife.key'Escape'this.closeVideoModalwindow.addEventListener'popstate'e>ifthis.videoModal && this.videoModal.style.display'block'this.closeVideoModaltrueopenVideoModalvideoSrcisRoutefalseifthis.videoModal && this.modalVideothis.modalVideo.srcvideoSrcthis.videoModal.style.display'block'document.body.style.overflow'hidden'if!isRoutehistory.pushStatemodalOpen: true''''setTimeout>this.modalVideo.play.catche>console.log'Autoplay prevented:'e100closeVideoModalskipHistoryChangefalseifthis.videoModal && this.modalVideothis.videoModal.style.display'none'this.modalVideo.pausethis.modalVideo.src''document.body.style.overflow'auto'const pathwindow.location.pathnameconst isVideoRoutepath.match^\video\.$ifisVideoRoutewindow.history.pushStatenull'砖专 爪专 拽爪注转 |  拽  砖专'''document.title'砖专 爪专 拽爪注转 |  拽  砖专'const canonicalTagdocument.querySelector'link[rel"canonical"]'ifcanonicalTagcanonicalTag.href'https:else if!skipHistoryChange && window.history.state && window.history.state.modalOpenhistory.backsetupContactFormifthis.contactFormthis.contactForm.addEventListener'submit'e>e.preventDefaultthis.handleFormSubmissionasync handleFormSubmissionconst formDatanew FormDatathis.contactFormconst dataObject.fromEntriesformDataconst errorsFormValidator.validateFormdataiferrors.length > 0this.showMessageerrors.join'\n''error'returnconst submitBtnthis.contactForm.querySelector'button[type"submit"]'const originalTextsubmitBtn.innerHTMLsubmitBtn.innerHTML'<i class"fas faspinner faspin"><i> 爪专 注...'submitBtn.disabledtruetryawait this.sendWhatsAppMessagedatacatcherrorconsole.error'WhatsApp message error:'errorthis.showMessage'砖 爪专转 注转 WhatsApp.  住 砖.''error'finallysubmitBtn.innerHTMLoriginalTextsubmitBtn.disabledfalseasync sendWhatsAppMessagedataconst formattedDatedata.date ? new Datedata.date.toLocaleDateString'heIL': ' 爪'const message`砖 !   注转  驻注:  砖: $data.name 驻: $data.phone 转专 注祝: $formattedDate 驻专 住驻: $data.message || ' 爪 驻专 住驻'砖 砖注  拽! `const encodedMessageencodeURIComponentmessageconst phoneNumber'972528962110'const whatsappUrl`https: await new Promiseresolve> setTimeoutresolve1000tryconst newWindowwindow.openwhatsappUrl'_blank''noopenernoreferrer'if!newWindow || newWindow.closed || typeof newWindow.closed'undefined'window.location.hrefwhatsappUrlelsethis.showMessage'注转 WhatsApp 爪专 爪! 驻驻 驻转 注 专注.''success'this.contactForm.resetcatcherrorconsole.log'Popup failedusing direct navigation:'errorwindow.location.hrefwhatsappUrlreturn trueshowMessagemessagetypeconst existingMessagesdocument.querySelectorAll'.formmessage'existingMessages.forEachmsg> msg.removeconst messageEldocument.createElement'div'messageEl.className`formmessage $type`messageEl.innerHTML` <i class"fas fa$type'success' ? 'checkcircle' : 'exclamationcircle'"><i> <span>$message<span> `messageEl.style.cssText` display: flexalignitems: centergap: 10pxpadding: 15px 20pxmargintop: 20pxborderradius: 10pxfontweight: 500background: $type'success' ? '#d4edda' : '#f8d7da'color: $type'success' ? '#155724' : '#721c24'border: 1px solid $type'success' ? '#c3e6cb' : '#f5c6cb'`this.contactForm.appendChildmessageElsetTimeout>messageEl.remove5000setupAnimationsconst observerOptionsthreshold: 0.1rootMargin: '0px 0px50px 0px'const observernew IntersectionObserverentries>entries.forEachentry>ifentry.isIntersectingentry.target.classList.add'visible'observerOptionsdocument.querySelectorAll'.servicecard.testimonialcard.videocard.highlightitem'.forEachel>el.classList.add'fadein'observer.observeeldocument.querySelectorAll'.servicesgrid .servicecard'.forEachcardindex>card.style.animationDelay`$index0.2s`document.querySelectorAll'.testimonialsgrid .testimonialcard'.forEachcardindex>card.style.animationDelay`$index0.2s`document.querySelectorAll'.videosgrid .videocard'.forEachcardindex>card.style.animationDelay`$index0.1s`setupSmoothScrollingdocument.querySelectorAll'a[href^"#"]'.forEachanchor>anchor.addEventListener'click'e>e.preventDefaultconst targetIdanchor.getAttribute'href'const targetSectiondocument.querySelectortargetIdiftargetSectionconst offsetToptargetSection.offsetTop80window.scrollTotop: offsetTopbehavior: 'smooth'const scrollIndicatordocument.querySelector'.scrollindicator'ifscrollIndicatorscrollIndicator.addEventListener'click'>const aboutSectiondocument.getElementById'about'ifaboutSectionaboutSection.scrollIntoViewbehavior: 'smooth'block: 'start'setupParallaxOptimizationsconst isLowEndDevice>return navigator.hardwareConcurrency <4 || window.devicePixelRatio < 1.5 ||Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Minii.testnavigator.userAgentifisLowEndDevicedocument.querySelectorAll'.parallaxlayer'.forEachlayer>layer.style.filter'none'document.addEventListener'visibilitychange'>const parallaxLayersdocument.querySelectorAll'.parallaxlayer'ifdocument.hiddenparallaxLayers.forEachlayer>layer.style.willChange'auto'elseparallaxLayers.forEachlayer>layer.style.willChange'transform'const heroObservernew IntersectionObserverentries>entries.forEachentry>ifentry.isIntersectingdocument.body.classList.add'parallaxactive'elsedocument.body.classList.remove'parallaxactive'threshold: 0.1const herodocument.querySelector'.hero'ifheroheroObserver.observeherodebouncefuncwaitlet timeoutreturn function executedFunction...argsconst later>clearTimeouttimeoutfunc...argsclearTimeouttimeouttimeoutsetTimeoutlaterwaitthrottlefunclimitlet inThrottlereturn functionconst argsargumentsconst contextthisif!inThrottlefunc.applycontextargsinThrottletruesetTimeout> inThrottlefalselimitclass FormValidatorstatic validateEmailemailconst re^[^\s@]@[^\s@]\.[^\s@]$return re.testemailstatic validatePhonephoneconst re^\972|0[23489]|5[02468]|77[09]7$return re.testphone.replace[]g''static validateFormformDataconst errors[]if!formData.name || formData.name.length < 2errors.push'砖    驻转 2 转'if!FormValidator.validatePhoneformData.phoneerrors.push'住驻专 驻  转拽'if!formData.dateerrors.push'砖 专 转专'elseconst selectedDatenew DateformData.dateconst todaynew Datetoday.setHours0000ifselectedDate < todayerrors.push'转专  转   注转'return errorsclass PerformanceUtilsstatic lazyLoadImagesif'IntersectionObserver' in windowconst imageObservernew IntersectionObserverentriesobserver>entries.forEachentry>ifentry.isIntersectingconst imgentry.targetimg.srcimg.dataset.srcimg.classList.remove'lazy'observer.unobserveimgdocument.querySelectorAll'img[datasrc]'.forEachimg>imageObserver.observeimgstatic preloadCriticalImagesclass Chatbotconstructorthis.chatWidgetdocument.getElementById'chatbotwidget'this.chatToggledocument.getElementById'chattoggle'this.chatModaldocument.getElementById'chatmodal'this.chatClosedocument.getElementById'chatclose'this.chatMessagesdocument.getElementById'chatmessages'this.chatInputFielddocument.getElementById'chatinputfield'this.chatSenddocument.getElementById'chatsend'this.chatTypingdocument.getElementById'chattyping'this.chatTooltipdocument.getElementById'chattooltip'this.isOpenfalsethis.isTypingfalsethis.API_BASE_URL'https: this.USE_BACKEND_APItruethis.sessionMessageCount0this.MAX_MESSAGES_PER_SESSION10this.sessionIdthis.getOrCreateSessionIdthis.conversationHistory[]ifthis.chatWidget && this.chatToggle && this.chatModalthis.initelseconsole.warn'Chatbot elements not foundskipping initialization'initthis.setupEventListenersthis.setupSuggestionsthis.enableInputValidationthis.setupTooltipIntroductionthis.setupPeriodicGlowEffectgetOrCreateSessionIdconst sessionIdthis.generateSessionIdlocalStorage.setItem'chat_session_id'sessionIdreturn sessionIdgenerateSessionIdreturn 'session_'Date.now'_'Math.random.toString36.substr29canSendMessagereturn this.sessionMessageCount < this.MAX_MESSAGES_PER_SESSIONsetupEventListenersifthis.chatTogglethis.chatToggle.addEventListener'click'>this.toggleChatifthis.chatClosethis.chatClose.addEventListener'click'>this.closeChatifthis.chatSendthis.chatSend.addEventListener'click'>this.sendMessageifthis.chatInputFieldthis.chatInputField.addEventListener'keypress'e>ife.key'Enter' && !e.shiftKey && this.chatInputField.value.trime.preventDefaultthis.sendMessagedocument.addEventListener'click'e>ifthis.isOpen && !this.chatWidget.containse.targetthis.closeChatdocument.addEventListener'keydown'e>ife.key'Escape' && this.isOpenthis.closeChatsetupSuggestionsdocument.querySelectorAll'.suggestionbtn'.forEachbtn>btn.addEventListener'click'>const questionbtn.textContentthis.chatInputField.valuequestionthis.sendMessageenableInputValidationifthis.chatInputField && this.chatSendthis.chatInputField.addEventListener'input'>const hasTextthis.chatInputField.value.trim.length > 0this.chatSend.disabled!hasText || this.isTyping || !this.canSendMessagetoggleChatifthis.isOpenthis.closeChatelsethis.openChatopenChatthis.isOpentrueifthis.chatTogglethis.chatToggle.classList.add'active'ifthis.chatModalthis.chatModal.classList.add'open'setTimeout>ifthis.chatInputFieldthis.chatInputField.focus300closeChatthis.isOpenfalseifthis.chatTogglethis.chatToggle.classList.remove'active'ifthis.chatModalthis.chatModal.classList.remove'open'sendMessageif!this.chatInputFieldreturnconst textthis.chatInputField.value.trimif!text || this.isTypingreturnif!this.canSendMessagethis.addMessage'爪注专注转 转 10 注转 砖. 砖  转爪专 拽砖专 砖专转 住驻: 0528962110''bot'this.disableChatInputreturnthis.sessionMessageCountifthis.sessionMessageCount >this.MAX_MESSAGES_PER_SESSIONsetTimeout>this.disableChatInput2000this.addMessagetext'user'this.chatInputField.value''ifthis.chatSendthis.chatSend.disabledtruethis.conversationHistory.pushrole: 'user'parts: [text: text]this.showTypingthis.getAIResponsetextaddMessagetextsenderif!this.chatMessagesreturnconst messageDivdocument.createElement'div'messageDiv.className`message $sendermessage`const timenew Date.toLocaleTimeString'heIL'hour: '2digit'minute: '2digit'const avatarsender'bot' ? '<div class"messageavatar"><i class"fas famusic"><i><div>' : '<div class"messageavatar"><i class"fas fauser"><i><div>'const processedTextsender'bot' ? this.processTextForLinkstext: textmessageDiv.innerHTML` $avatar<div class"messagecontent"> <p>$processedText<p> <span class"messagetime">$time<span> <div> `this.chatMessages.appendChildmessageDivthis.scrollToBottomshowTypingthis.isTypingtrueifthis.chatTypingthis.chatTyping.style.display'flex'ifthis.chatSendthis.chatSend.disabledtruethis.scrollToBottomhideTypingthis.isTypingfalseifthis.chatTypingthis.chatTyping.style.display'none'ifthis.chatSend && this.chatInputFieldthis.chatSend.disabledthis.chatInputField.value.trim.length0 || !this.canSendMessagescrollToBottomifthis.chatMessagessetTimeout>this.chatMessages.scrollTopthis.chatMessages.scrollHeight100disableChatInputifthis.chatInputFieldthis.chatInputField.disabledtruethis.chatInputField.placeholder'注转 转 10 注转爪专 拽砖专 住驻'ifthis.chatSendthis.chatSend.disabledtrueisMobileDevicereturnAndroid|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Minii.testnavigator.userAgentprocessTextForLinkstextconst isMobilethis.isMobileDeviceconst phonePattern0\d12?\d3?\d4gconst whatsappPatternhttps?:\\?:wa\.me|api\.whatsapp\.com\[^\s]glet processedTexttextprocessedTextprocessedText.replacewhatsappPatternmatch>ifisMobilereturn `<a href"$match" target"_blank" style"color: #25D366textdecoration: underline">爪专 拽砖专 住驻<a>`elsereturn `<a href"$match" target"_blank" style"color: #25D366textdecoration: underline">爪专 拽砖专 住驻<a>`processedTextprocessedText.replacephonePatternmatch>const cleanPhonematch.replaceg''ifisMobilereturn `<a href"tel:$cleanPhone" style"color: #007bfftextdecoration: underline">$match<a>`elsereturn `<span style"color: #007bfffontweight: bold">$match<span>`return processedTextasync getAIResponseuserMessageifthis.USE_BACKEND_APIawait this.getBackendResponseuserMessageelseawait this.getFallbackResponseuserMessageasync getBackendResponseuserMessagetryconst requestBodymessages: this.conversationHistorysession_id: this.sessionIdconst timeoutPromisenew Promise_reject> setTimeout> rejectnew Error'Request timeout'10000const fetchPromisefetch`$this.API_BASE_URLchat`method: 'POST'headers:'ContentType': 'applicationjson'body: JSON.stringifyrequestBodyconst responseawait Promise.race[fetchPromisetimeoutPromise]if!response.okthrow new Error`Backend API Error: $response.status`const dataawait response.jsonifdata.session_id && data.session_id !this.sessionIdthis.sessionIddata.session_idlocalStorage.setItem'chat_session_id'this.sessionIdthis.conversationHistory.pushrole: 'assistant'parts: [text: data.response]ifthis.conversationHistory.length > 10this.conversationHistorythis.conversationHistory.slice8this.hideTypingthis.addMessagedata.response'bot'catcherrorconsole.error'Backend API Error:'errorthis.hideTypingiferror.message.includes'429'this.addMessage'注转 转 注转 砖注转转. 砖  转爪专 拽砖专 砖专转 住驻: 0528962110''bot'else iferror.message.includes'500'this.addMessage'砖 注 转 注专转.   住驻  砖: 0528962110''bot'elseawait this.getFallbackResponseuserMessageasync getFallbackResponseuserMessageconst responses'  驻注 专拽': '驻注 专拽 砖 : 注专转 专转 砖专  转 拽 拽专驻  拽拽专转 专 拽爪注转. 拽 专 转 转 砖专 专驻专专!'' 注 驻注': '专 转 住驻专 专  住驻专 专砖 拽. 砖 转转  爪注转 专 拽转 专 砖转住驻专  注 专注 砖.  注专 住驻 驻专? 0528962110'' 驻注转 注专转 专转 砖专': '注专转 砖 驻砖 驻转! 专 住 转专 爪注转 QR 拽专 专砖 砖 转 砖专 专专 转 砖专 砖  .  专 转 拽砖转  转  转 驻注 转!''default': [ '砖 注专  注 专注!  专 转专 驻专 住驻: 0528962110''砖 注!   注转 注  砖转 砖 住驻: 0528962110''砖 注专  转 转 专注 砖!  砖 住驻: 0528962110' ]await new Promiseresolve> setTimeoutresolve1000Math.random1000const lowerMessageuserMessage.toLowerCaselet responsenullforconst [keyresponseText] of Object.entriesresponsesifkey !'default' && lowerMessage.includeskeyresponseresponseTextbreakif!responseiflowerMessage.includes'专'|| lowerMessage.includes'注'|| lowerMessage.includes'注转'responseresponses[' 注 驻注']else iflowerMessage.includes'砖专'|| lowerMessage.includes'专驻专专'|| lowerMessage.includes'拽'response'专驻专专 砖 砖 转 砖专  转拽驻转: 砖专 专抓 砖专 砖砖 专爪专 注 砖专 专 转专. 注专转 专拽转 专  专转 转  专砖 专!'if!responseconst defaultResponsesresponses['default']responsedefaultResponses[Math.floorMath.randomdefaultResponses.length]this.hideTypingthis.addMessageresponse'bot'setupTooltipIntroductionif!this.chatTooltipreturnsetTimeout>this.chatTooltip.classList.add'show'setTimeout>this.chatTooltip.classList.remove'show'30003000this.chatToggle.addEventListener'click'>this.chatTooltip.classList.remove'show'setupPeriodicGlowEffectsetInterval>if!this.isOpenthis.chatToggle.classList.add'gloweffect'setTimeout>this.chatToggle.classList.remove'gloweffect'15008000document.addEventListener'DOMContentLoaded'>new MusicianSitenew ChatbotPerformanceUtils.lazyLoadImagesPerformanceUtils.preloadCriticalImagessetTimeout>document.body.classList.add'loaded'100document.addEventListener'visibilitychange'>ifdocument.hiddenconst videosdocument.querySelectorAll'video'videos.forEachvideo>if!video.pausedvideo.pausevideo.dataset.wasPlaying'true'elseconst videosdocument.querySelectorAll'video[datawasplaying"true"]'videos.forEachvideo>video.playdelete video.dataset.wasPlayingwindow.addEventListener'resize'>ifwindow.innerWidth > 768const navMenudocument.getElementById'navmenu'const hamburgerdocument.getElementById'hamburger'ifnavMenu && hamburgernavMenu.classList.remove'active'hamburger.classList.remove'active'